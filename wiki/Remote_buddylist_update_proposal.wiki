Via jtorchat, grab bl.txt from a remote location, and merge with own buddies.

BuddyList.java - Method added (work in progress):


{{{

	/*
	 *  REMOTE BUDDY LOAD VIA TOR
	 * */
	public static void loadBuddiesRemote() throws FileNotFoundException {
		
		/*
		 *  RETREIVE REMOTE FILE VIA PROXY TO SCANNER OBJECT
		 * */		
		Scanner s = null ;
		try {
		    // Create a URL for the desired page
		    URL url = new URL("example.com");
		    URLConnection conn = url.openConnection(new Proxy(Proxy.Type.SOCKS, new InetSocketAddress("127.0.0.1", Config.SOCKS_PORT)));
			s = new Scanner( new InputStreamReader( conn.getInputStream() ) );
		} catch (IOException e) {
		}
		
		
		/*
		 *  PROCESS FILE AND MERGE BUDDY
		 * */
		Random r = new Random();
		while (s.hasNextLine()) {
			String l = s.nextLine();
			// from 0 to 16 is address, 17 onwards is name
			if (buds.containsKey(l.substring(0, 16)))
				try {
					buds.remove(l.substring(0, 16)).disconnect();
				} catch (IOException e) {
					System.err.println("Error disconnecting buddy: " + e.getLocalizedMessage());
				}
			if (l.length() > 16) {
				Buddy b = new Buddy(l.substring(0, 16), l.substring(17)); //.connect();
				b.reconnectAt = System.currentTimeMillis() + 15000 + r.nextInt(30000);
				if (l.toCharArray()[16] == '!')
					b.overrideName = true;
			} else
				new Buddy(l.substring(0, 16), null).reconnectAt = System.currentTimeMillis() + 15000 + r.nextInt(30000); //.connect();
		}
	}

}}}